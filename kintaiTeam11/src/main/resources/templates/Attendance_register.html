<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>å‹¤æ€ ç™»éŒ²</title>
<link href="https://fonts.googleapis.com/css2?family=Monoton&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;700&display=swap" rel="stylesheet">
<link rel="stylesheet" th:href="@{/css/style_attendance.css}">
</head>
<body>
  <div class="container">
    <div class="left">
      <div class="circle-bg"></div>
      <div class="menu-buttons">
        <a href="/top"><div class="menu-button">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</div></a>
        <a href="/L"><div class="menu-button">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</div></a>
      </div>
      <div class="logo-area">
        <span class="company">company</span>
        <span class="m">M</span>
      </div>
    </div>

    <!-- ğŸ”½ å‰æ—¥æœªç™»éŒ²ãƒ•ãƒ©ã‚°ã‚’ä»•è¾¼ã‚€ -->
    <input type="hidden" id="prevDayStatus" value="missing">

    <div class="right">
      <h1>å‹¤æ€ ç™»éŒ²ç”»é¢</h1>
      <form th:action="@{/Register_complate}" method="POST" th:object="${AttendancetForm}">
        
        <!-- ğŸ”½ é‡è¤‡ç™»éŒ²ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãƒ–ãƒ­ãƒƒã‚¯ -->
        <div th:if="${duplicateError}" class="error-message" style="color: red; font-weight: bold; margin-bottom: 15px;">
          <p th:text="${duplicateError}"></p>
        </div>

        <div class="form-group">
          <label><span class="required">â€»</span>ãƒ¦ãƒ¼ã‚¶ãƒ¼ID</label>
          <div class="form-input-wrap">
            <p><strong th:text="${employeeId}">æœªãƒ­ã‚°ã‚¤ãƒ³</strong></p>
          </div>
        </div>

        <div class="form-group">
          <label><span class="required">â€»</span>æ—¥ä»˜</label>
          <div class="form-input-wrap">
            <input type="date" th:field="*{workDate}" placeholder="æ—¥ä»˜ã‚’é¸æŠ" required>
          </div>
        </div>

        <div class="form-group">
          <label><span class="required">â€»</span>å‹¤æ€ åŒºåˆ†</label>
          <div class="form-input-wrap">
            <select th:field="*{leaveType}" required>
              <option value="é¸æŠã—ã¦ãã ã•ã„">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="å‡ºå‹¤">å‡ºå‹¤</option>
              <option value="æŒ¯å‡º">æŒ¯å‡º</option>
              <option value="æŒ¯ä¼‘">æŒ¯ä¼‘</option>
              <option value="å¹´ä¼‘">å¹´ä¼‘</option>
              <option value="ä¼‘æ—¥">ä¼‘æ—¥</option>
              <option value="æ¬ å‹¤">æ¬ å‹¤</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label><span class="required">â€»</span>é–‹å§‹æ™‚é–“</label>
          <div class="form-input-wrap">
            <input type="time" th:field="*{checkInTime}" required>
          </div>
        </div>

        <div class="form-group">
          <label><span class="required">â€»</span>çµ‚äº†æ™‚é–“</label>
          <div class="form-input-wrap">
            <input type="time" th:field="*{checkOutTime}" required>
          </div>
        </div>

        <div class="form-group">
          <label><span class="required">â€»</span>ä¼‘æ†©æ™‚é–“</label>
          <div class="form-input-wrap">
            <input type="time" th:field="*{breakTime}" required>
          </div>
        </div>

        <div class="form-group">

          <label for="bikou">å‚™è€ƒ</label>

          <div class="form-input-wrap">
            <input type="text" th:field="*{remarks}" placeholder="å‚™è€ƒ">
          </div>
        </div>

        <button type="submit">ç™»éŒ²</button>
        <a href="/AtMenu" class="return-link">å‹¤æ€ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a>
      </form>
    </div>
  </div>

  <script>
    // å‰æ—¥æœªç™»éŒ²ãƒã‚§ãƒƒã‚¯ã®ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
    document.querySelector('form').addEventListener('submit', function(e) {
      const prevStatus = document.getElementById('prevDayStatus').value;
      if (prevStatus === 'missing') {
        const confirmRegister = confirm('å‰æ—¥ã®å‹¤æ€ ç™»éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚\nã“ã®ã¾ã¾ç™»éŒ²ã—ã¦ã‚‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ');
        if (!confirmRegister) {
          e.preventDefault();
          return;
        }
      }
    });
  </script>
</body>
</html>
